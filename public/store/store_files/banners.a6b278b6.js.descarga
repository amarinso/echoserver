define("plugins/jquery.fitvids",["jquery"],function(t){"use strict";t.fn.fitVids=function(e){var n={customSelector:null};if(!document.getElementById("fit-vids-style")){var i=document.createElement("div"),a=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];i.className="fit-vids-style",i.id="fit-vids-style",i.style.display="none",i.innerHTML="&shy;<style>                 .fluid-width-video-wrapper {                   width: 100%;                                position: relative;                         padding: 0;                              }                                                                                       .fluid-width-video-wrapper iframe,          .fluid-width-video-wrapper object,          .fluid-width-video-wrapper embed {             position: absolute;                         top: 0;                                     left: 0;                                    width: 100%;                                height: 100%;                            }                                         </style>",a.parentNode.insertBefore(i,a)}return e&&t.extend(n,e),this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];n.customSelector&&e.push(n.customSelector);var i=t(this).find(e.join(","));i.each(function(){var e=t(this);if(!("embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){var n="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),i=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),a=n/i;if(!e.attr("id")){var r="fitvid"+Math.floor(999999*Math.random());e.attr("id",r)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*a+"%"),e.removeAttr("height").removeAttr("width")}})})}}),define("plugins/jquery.swipe",["jquery"],function(t){function e(t,e){"use strict";function n(){m=p.children,b=m.length,m.length<2&&(e.continuous=!1),v.transitions&&e.continuous&&m.length<3&&(p.appendChild(m[0].cloneNode(!0)),p.appendChild(p.children[1].cloneNode(!0)),m=p.children,j=!0),w=new Array(m.length),g=t.getBoundingClientRect().width||t.offsetWidth,p.style.width=m.length*g+"px";for(var n=m.length;n--;){var i=m[n];i.style.width=g+"px",i.setAttribute("data-index",n),v.transitions&&(i.style.left=n*-g+"px",s(n,y>n?-g:n>y?g:0,0))}e.continuous&&v.transitions&&(s(r(y-1),-g,0),s(r(y+1),g,0)),v.transitions||(p.style.left=y*-g+"px"),t.style.visibility="visible"}function i(){e.continuous?o(y-1):y&&o(y-1)}function a(){e.continuous?o(y+1):y<m.length-1&&o(y+1)}function r(t){return(m.length+t%m.length)%m.length}function o(t,n){if(y!=t){if(v.transitions){var i=Math.abs(y-t)/(y-t);if(e.continuous){var a=i;i=-w[r(t)]/g,i!==a&&(t=-i*m.length+t)}for(var o=Math.abs(y-t)-1;o--;)s(r((t>y?t:y)-o-1),g*i,0);t=r(t),s(y,g*i,n||x),s(t,0,n||x),e.continuous&&s(r(t-i),-(g*i),0)}else t=r(t),c(y*-g,t*-g,n||x);y=t,E=j?y%2:y,f(e.callback&&e.callback(E,m[y]))}}function s(t,e,n){d(t,e,n),w[t]=e}function d(t,e,n){var i=m[t],a=i&&i.style;a&&(a.webkitTransitionDuration=a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration=n+"ms",a.webkitTransform="translate("+e+"px,0)translateZ(0)",a.msTransform=a.MozTransform=a.OTransform="translateX("+e+"px)")}function c(t,n,i){if(!i)return void(p.style.left=n+"px");var a=+new Date,r=setInterval(function(){var o=+new Date-a;return o>i?(p.style.left=n+"px",L&&u(),e.transitionEnd&&e.transitionEnd.call(event,E,m[y]),void clearInterval(r)):void(p.style.left=(n-t)*(Math.floor(o/i*100)/100)+t+"px")},4)}function u(){T=setTimeout(a,L)}function l(){L=0,clearTimeout(T)}var h=function(){},f=function(t){setTimeout(t||h,0)},v={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in e)if(void 0!==t.style[e[n]])return!0;return!1}(document.createElement("swipe"))};if(t){var p=t.children[0];if(p.children){var m,w,g,b;e=e||{};var y=parseInt(e.startSlide,10)||0,E=y,x=e.speed||300,j=!1;e.continuous=void 0!==e.continuous?e.continuous:!0;var T,k,L=e.auto||0,D={},M={},N={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":f(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":f(this.transitionEnd(t));break;case"resize":f(n)}e.stopPropagation&&t.stopPropagation()},start:function(t){var e=t.touches[0];D={x:e.pageX,y:e.pageY,time:+new Date},k=void 0,M={},p.addEventListener("touchmove",this,!1),p.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){e.disableScroll&&t.preventDefault();var n=t.touches[0];M={x:n.pageX-D.x,y:n.pageY-D.y},"undefined"==typeof k&&(k=!!(k||Math.abs(M.x)<Math.abs(M.y))),k||(t.preventDefault(),l(),e.continuous?(d(r(y-1),M.x+w[r(y-1)],0),d(y,M.x+w[y],0),d(r(y+1),M.x+w[r(y+1)],0)):(M.x=M.x/(!y&&M.x>0||y==m.length-1&&M.x<0?Math.abs(M.x)/g+1:1),d(y-1,M.x+w[y-1],0),d(y,M.x+w[y],0),d(y+1,M.x+w[y+1],0)))}},end:function(t){var n=+new Date-D.time,i=Number(n)<250&&Math.abs(M.x)>20||Math.abs(M.x)>g/2,a=!y&&M.x>0||y==m.length-1&&M.x<0;e.continuous&&(a=!1);var o=M.x<0;k||(i&&!a?(o?(e.continuous?(s(r(y-1),-g,0),s(r(y+2),g,0)):s(y-1,-g,0),s(y,w[y]-g,x),s(r(y+1),w[r(y+1)]-g,x),y=r(y+1)):(e.continuous?(s(r(y+1),g,0),s(r(y-2),-g,0)):s(y+1,g,0),s(y,w[y]+g,x),s(r(y-1),w[r(y-1)]+g,x),y=r(y-1)),E=j?y%2:y,e.callback&&e.callback(E,m[y])):e.continuous?(s(r(y-1),-g,x),s(y,0,x),s(r(y+1),g,x)):(s(y-1,-g,x),s(y,0,x),s(y+1,g,x))),p.removeEventListener("touchmove",N,!1),p.removeEventListener("touchend",N,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==y&&(L&&u(),e.transitionEnd&&e.transitionEnd.call(t,E,m[y]))}};return n(),L&&u(),v.addEventListener?(v.touch&&p.addEventListener("touchstart",N,!1),v.transitions&&(p.addEventListener("webkitTransitionEnd",N,!1),p.addEventListener("msTransitionEnd",N,!1),p.addEventListener("oTransitionEnd",N,!1),p.addEventListener("otransitionend",N,!1),p.addEventListener("transitionend",N,!1)),window.addEventListener("resize",N,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(t,e){l(),o(t,e)},prev:function(){l(),i()},next:function(){l(),a()},stop:function(){l()},getPos:function(){return E},getNumSlides:function(){return b},kill:function(){l(),v.addEventListener?(p.removeEventListener("touchstart",N,!1),p.removeEventListener("webkitTransitionEnd",N,!1),p.removeEventListener("msTransitionEnd",N,!1),p.removeEventListener("oTransitionEnd",N,!1),p.removeEventListener("otransitionend",N,!1),p.removeEventListener("transitionend",N,!1),window.removeEventListener("resize",N,!1)):window.onresize=null}}}}}t.fn.Swipe=function(n){return this.each(function(){t(this).data("Swipe",new e(this,n))})}}),define("modules/banners",["jquery","utils/jquery_document","utils/window","modules/ecommerce","plugins/jquery.fitvids","plugins/jquery.swipe"],function(t,e,n,i){"use strict";function a(i){var a=i&&i.target?i.target:null;t(".js-banner",a).on("load error",function(){t(this).addClass("is-loaded").parents(".js-banners").find(".js-banner-placeholder").remove()}).each(function(){this.complete&&t(this).trigger("load").parents(".js-banners").find(".js-banner").off("load")}),t(".js-banner",a).on("error",function(){t(this).remove()}),t(".js-banner-container",a).each(function(){var i,a,r,s,d,c=t(this),u=c.find(".js-video"),l=c.find(".js-swipe"),h=c.find(".js-banner-url"),f=h.first();if(o({id:f.data("id"),name:f.data("name"),creative:"banner",position:f.data("position")}),u.length&&(i=c.find(".js-banner-video-cover"),r=c.find("#videoTemplate"),a=c.find(".js-main-banner"),i.on("click",function(){var e=t(n).height()/2,o={videocode:t(this).data("videocode"),height:e,width:i.width()};t(this).hide(),a.hide(),u.removeClass("is-hidden").css("height",i.height()).animate({height:e},300,function(){t(this).css("height","inherit")}).find("iframe").parent().remove(),u.append(r.tmpl(o)).fitVids()}),u.on("click",".js-close",function(t){u.find("iframe").parent().remove(),u.addClass("is-hidden"),i.show(),a.show(),t.preventDefault()})),l.length){s=c.find(".js-pager-item"),d=c.find(".js-nav-banner"),l.Swipe({callback:function(e,n){var i=t(n),a=i.find(".js-banner-url");a.attr("href");o({id:a.data("id"),name:a.data("name"),creative:"banner",position:a.data("position")}),s.removeClass("is-active"),t.each(d,function(n,i){t(i).find(".js-pager-item").eq(e).addClass("is-active")})},auto:l.data("auto-slideshow")?4250:!1}),e.one("pjax:start",function(){var t=l.data("Swipe");t&&t.kill()});var v=t(".js-banner-url[data-current=true]");v.length&&l.data("Swipe").slide(v.parent().index(),1),s.on("click",function(e){l.data("Swipe").slide(t(this).index()),e.preventDefault()})}})}function r(e,n){n="desktop-wide"===n?"desktop":n,t(".js-banner").each(function(){var e=t(this);t(this).attr("src",e.data(n))})}function o(e){-1===t.inArray(e.id,s)&&(s.push(e.id),i.trackPromoView(e))}var s=[];e.ready(a).on("pjax:end",function(t){s=[],a(t)}).on("hinclude:end",a).on("enquire:breakpoint",r).on("click",".js-banner-url",function(e){var n=t(e.currentTarget);i.trackPromoClick({id:n.data("id"),name:n.data("name"),creative:"banner",position:n.data("position")})})});